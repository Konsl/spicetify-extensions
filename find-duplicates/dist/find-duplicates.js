var findDduplicates=(()=>{var i=class{};function a(){var e;return i.loadedIsrcCache||(i.isrcCache=JSON.parse(null!=(e=localStorage.getItem("find-duplicates:isrc-cache"))?e:"[]"),i.loadedIsrcCache=!0),i.isrcCache}function d(e){i.loadedIsrcCache=!0,i.isrcCache=e,localStorage.setItem("find-duplicates:isrc-cache",JSON.stringify(e))}function c(){var e;return i.loadedLibraryIsrcCache||(i.libraryIsrcCache=JSON.parse(null!=(e=localStorage.getItem("find-duplicates:library-isrc-cache"))?e:"[]"),i.loadedLibraryIsrcCache=!0),i.libraryIsrcCache}function s(e){i.loadedLibraryIsrcCache=!0,i.libraryIsrcCache=e,localStorage.setItem("find-duplicates:library-isrc-cache",JSON.stringify(e))}i.loadedIsrcCache=!1,i.loadedLibraryIsrcCache=!1;var n=class{};function l(){const i=window.webpackChunkopen.push([[Symbol()],{},e=>e]);var e=Object.keys(i.m).map(e=>i(e)).filter(e=>"object"==typeof e).map(e=>{try{return Object.values(e)}catch(e){}}).flat().filter(e=>{return!(null==e||!e.type)&&"function"==typeof e.type&&(e=e.type.toString()).includes("remove-from-library")&&e.includes("add-to-library")&&e.includes("className")&&!e.includes("isEpisode")});1==e.length?(n.heartRendererEntry=e[0],n.heartRenderer=n.heartRendererEntry.type):(n.heartRendererEntry=void 0,n.heartRenderer=void 0),n.loaded=!0}n.loaded=!1;var u=class{};async function v(){var e,i=await m([...new Set(u.registeredEntries.map(e=>e.uri))]);for(const t of u.registeredEntries)t.setCount(f(null==(e=i.find(e=>e[0]==t.uri))?void 0:e[1])),t.setup=!0;u.started=!1}function f(i){return c().filter(e=>e[1]==i).length}function o(){n.loaded||l();var e=n.heartRendererEntry;e?(e.type=function(e){const t=e.uri,[i,r]=Spicetify.React.useState(0);Spicetify.React.useEffect(()=>{const i={uri:t,setCount:r,setup:!1};var e;return e=i,u.registeredEntries.push(e),u.started||(u.started=!0,setTimeout(async()=>{var e;if(!h()){var i=u.registeredEntries.filter(e=>!e.setup),t=await m([...new Set(i.map(e=>e.uri))]);for(const r of i)r.setCount(f(null==(e=t.find(e=>e[0]==r.uri))?void 0:e[1])),r.setup=!0;u.started=!1}},0)),()=>{var e;e=i,0<=(e=u.registeredEntries.indexOf(e))&&u.registeredEntries.splice(e,1)}},[]);n.loaded||l();var o=n.heartRenderer.apply(this,arguments);return Spicetify.React.createElement(Spicetify.React.Fragment,{children:[i?Spicetify.React.createElement("span",{class:"TypeElement-mesto-textSubdued-type"},i.toString()):void 0,o]})},Spicetify.Platform.History.replace(Spicetify.Platform.History.location)):Spicetify.showNotification("Error while attaching save count",!0)}u.registeredEntries=[],u.started=!1;var p=class{};function y(){p.updateRunning?p.reUpdate=!0:async function e(){p.updateRunning=!0;const i=(await Spicetify.Platform.LibraryAPI.getTracks({limit:-1})).items.map(e=>e.uri);let t=c();const r=i.filter(i=>!t.find(e=>e[0]==i));const o=t.filter(e=>!i.includes(e[0])).map(e=>e[0]);t=t.filter(e=>!o.includes(e[0]));for(let e=0;e<r.length;e+=50){const n=r.slice(e,Math.min(e+50,r.length)).map(e=>{return null==(e=Spicetify.URI.from(e))?void 0:e.id}).filter(e=>!!e),a=(await Spicetify.CosmosAsync.get("https://api.spotify.com/v1/tracks?ids="+encodeURIComponent(n.join(",")))).tracks;t.push(...a.filter(e=>{return null==(e=null==e?void 0:e.external_ids)?void 0:e.isrc}).map(e=>[e.uri,e.external_ids.isrc]))}s(t);(p.reUpdate?(p.reUpdate=!1,e):v)();p.updateRunning=!1}()}function h(){return p.updateRunning}async function m(i){var t=a(),e=c();const r=t.filter(e=>i.includes(e[0]));r.push(...e.filter(e=>i.includes(e[0])));var o=i.filter(i=>!r.find(e=>e[0]==i));for(let e=0;e<o.length;e+=50){var n=o.slice(e,Math.min(e+50,o.length)).map(e=>{return null==(e=Spicetify.URI.from(e))?void 0:e.id}).filter(e=>!!e),n=(await Spicetify.CosmosAsync.get("https://api.spotify.com/v1/tracks?ids="+encodeURIComponent(n.join(",")))).tracks.filter(e=>{return null==(e=null==e?void 0:e.external_ids)?void 0:e.isrc}).map(e=>[e.uri,e.external_ids.isrc]);r.push(...n),t.push(...n)}return 2e3<t.length&&t.splice(0,t.length-2e3),d(t),r}p.updateRunning=!1,p.reUpdate=!1;var t={af:void 0,am:void 0,"ar-EG":void 0,"ar-MA":void 0,"ar-SA":void 0,ar:void 0,az:void 0,bg:void 0,bho:void 0,bn:void 0,bs:void 0,ca:void 0,cs:void 0,da:void 0,de:{contextMenuText:"Duplikate anzeigen",errorCouldNotRetrieveISRC:"Felher: ISRC konnte nicht abgerufen werden"},el:void 0,"en-GB":void 0,en:{contextMenuText:"View Duplicates",errorCouldNotRetrieveISRC:"Error: Could not retrieve ISRC"},"es-419":void 0,"es-AR":void 0,"es-MX":void 0,es:void 0,et:void 0,eu:void 0,fa:void 0,fi:void 0,fil:void 0,"fr-CA":void 0,fr:void 0,gl:void 0,gu:void 0,he:void 0,hi:void 0,hr:void 0,hu:void 0,id:void 0,is:void 0,it:void 0,ja:void 0,kn:void 0,ko:void 0,lt:void 0,lv:void 0,mk:void 0,ml:void 0,mr:void 0,ms:void 0,nb:void 0,ne:void 0,nl:void 0,or:void 0,"pa-IN":void 0,"pa-PK":void 0,pl:void 0,"pt-BR":void 0,"pt-PT":void 0,ro:void 0,ru:void 0,sk:void 0,sl:void 0,sr:void 0,sv:void 0,sw:void 0,ta:void 0,te:void 0,th:void 0,tr:void 0,uk:void 0,ur:void 0,vi:void 0,"zh-CN":void 0,"zh-HK":void 0,"zh-TW":void 0,zu:void 0};function S(){var e;return null!=(e=t[Spicetify.Locale._locale])?e:t.en}var e=async function(){for(var e;!(null!=Spicetify&&Spicetify.ContextMenu&&null!=Spicetify&&Spicetify.CosmosAsync&&null!=(e=null==Spicetify?void 0:Spicetify.Platform)&&e.History&&null!=Spicetify&&Spicetify.Locale&&null!=Spicetify&&Spicetify.URI);)await new Promise(e=>setTimeout(e,100));const{ContextMenu:i,Platform:t,URI:r}=Spicetify;Spicetify.Platform.LibraryAPI.getEvents().addListener("update",y),y(),o(),new i.Item(S().contextMenuText,async e=>{e=await async function(i){var e=a();if(t=e.find(e=>e[0]==i))return t[1];if(t=c().find(e=>e[0]==i))return t[1];if(!h()){var t=Spicetify.URI.from(i),t=null==t?void 0:t.id;if(t){t=await Spicetify.CosmosAsync.get("https://api.spotify.com/v1/tracks/"+encodeURIComponent(t)),t=null==(t=null==t?void 0:t.external_ids)?void 0:t.isrc;if(t)return e.push([i,t]),2e3<e.length&&e.splice(0,e.length-2e3),d(e),t}}}(e[0]);e?t.History.push(`/search/${encodeURIComponent("isrc:"+e)}/tracks`):Spicetify.showNotification(S().errorCouldNotRetrieveISRC,!0)},e=>{return 1==e.length&&(null==(e=r.from(e[0]))?void 0:e.type)==r.Type.TRACK}).register()};(async()=>{await e()})()})();